<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File List</title>
</head>
<body>
    <h1>All Files</h1>
    <div id="fileList"></div>
    <div id="loading">Loading files...</div>
    <div id="error" style="color: red;"></div>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const fileList = document.getElementById('fileList');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            try {
                const response = await fetch('filelist.json');
                if (!response.ok) throw new Error('Failed to load file list');
                const files = await response.json();
                if (files.length === 0) {
                    fileList.innerHTML = '<p>No files found.</p>';
                } else {
                    const fileItems = files.map(file => `
                        <div>
                            <a href="${file.name}" target="_blank">${file.name}</a>
                            <span> (${formatSize(file.size)})</span>
                        </div>
                    `).join('');
                    fileList.innerHTML = fileItems;
                }
            } catch (err) {
                loading.style.display = 'none';
                error.textContent = `Error: ${err.message}`;
                console.error(err);
            } finally {
                loading.style.display = 'none';
            }
        });
        function formatSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>